{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nrequire('../../../utils/index.js');\nrequire('../../../hooks/index.js');\nrequire('../../../constants/index.js');\nvar constants = require('./constants.js');\nvar lodashUnified = require('lodash-unified');\nvar event = require('../../../constants/event.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nconst useCollapse = (props, emit) => {\n  const activeNames = vue.ref(lodashUnified.castArray(props.modelValue));\n  const setActiveNames = _activeNames => {\n    activeNames.value = _activeNames;\n    const value = props.accordion ? activeNames.value[0] : activeNames.value;\n    emit(event.UPDATE_MODEL_EVENT, value);\n    emit(event.CHANGE_EVENT, value);\n  };\n  const handleItemClick = name => {\n    if (props.accordion) {\n      setActiveNames([activeNames.value[0] === name ? \"\" : name]);\n    } else {\n      const _activeNames = [...activeNames.value];\n      const index = _activeNames.indexOf(name);\n      if (index > -1) {\n        _activeNames.splice(index, 1);\n      } else {\n        _activeNames.push(name);\n      }\n      setActiveNames(_activeNames);\n    }\n  };\n  vue.watch(() => props.modelValue, () => activeNames.value = lodashUnified.castArray(props.modelValue), {\n    deep: true\n  });\n  vue.provide(constants.collapseContextKey, {\n    activeNames,\n    handleItemClick\n  });\n  return {\n    activeNames,\n    setActiveNames\n  };\n};\nconst useCollapseDOM = () => {\n  const ns = index.useNamespace(\"collapse\");\n  const rootKls = vue.computed(() => ns.b());\n  return {\n    rootKls\n  };\n};\nexports.useCollapse = useCollapse;\nexports.useCollapseDOM = useCollapseDOM;","map":{"version":3,"names":["useCollapse","props","emit","activeNames","vue","ref","lodashUnified","castArray","modelValue","setActiveNames","_activeNames","value","accordion","event","UPDATE_MODEL_EVENT","CHANGE_EVENT","handleItemClick","name","index","indexOf","splice","push","watch","deep","provide","constants","collapseContextKey","useCollapseDOM","ns","useNamespace","rootKls","computed","b"],"sources":["../../../../../../packages/components/collapse/src/use-collapse.ts"],"sourcesContent":["import { computed, provide, ref, watch } from 'vue'\nimport { ensureArray } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { CHANGE_EVENT, UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { collapseContextKey } from './constants'\n\nimport type { SetupContext } from 'vue'\nimport type {\n  CollapseActiveName,\n  CollapseEmits,\n  CollapseProps,\n} from './collapse'\n\nexport const useCollapse = (\n  props: CollapseProps,\n  emit: SetupContext<CollapseEmits>['emit']\n) => {\n  const activeNames = ref(ensureArray(props.modelValue))\n\n  const setActiveNames = (_activeNames: CollapseActiveName[]) => {\n    activeNames.value = _activeNames\n    const value = props.accordion ? activeNames.value[0] : activeNames.value\n    emit(UPDATE_MODEL_EVENT, value)\n    emit(CHANGE_EVENT, value)\n  }\n\n  const handleItemClick = (name: CollapseActiveName) => {\n    if (props.accordion) {\n      setActiveNames([activeNames.value[0] === name ? '' : name])\n    } else {\n      const _activeNames = [...activeNames.value]\n      const index = _activeNames.indexOf(name)\n\n      if (index > -1) {\n        _activeNames.splice(index, 1)\n      } else {\n        _activeNames.push(name)\n      }\n      setActiveNames(_activeNames)\n    }\n  }\n\n  watch(\n    () => props.modelValue,\n    () => (activeNames.value = ensureArray(props.modelValue)),\n    { deep: true }\n  )\n\n  provide(collapseContextKey, {\n    activeNames,\n    handleItemClick,\n  })\n  return {\n    activeNames,\n    setActiveNames,\n  }\n}\n\nexport const useCollapseDOM = () => {\n  const ns = useNamespace('collapse')\n\n  const rootKls = computed(() => ns.b())\n  return {\n    rootKls,\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAKY,MAACA,WAAW,GAAGA,CAACC,KAAK,EAAEC,IAAI,KAAK;EAC1C,MAAMC,WAAW,GAAGC,GAAA,CAAAC,GAAG,CAACC,aAAA,CAAAC,SAAW,CAACN,KAAK,CAACO,UAAU,CAAC,CAAC;EACtD,MAAMC,cAAc,GAAIC,YAAY,IAAK;IACvCP,WAAW,CAACQ,KAAK,GAAGD,YAAY;IAChC,MAAMC,KAAK,GAAGV,KAAK,CAACW,SAAS,GAAGT,WAAW,CAACQ,KAAK,CAAC,CAAC,CAAC,GAAGR,WAAW,CAACQ,KAAK;IACxET,IAAI,CAACW,KAAA,CAAAC,kBAAkB,EAAEH,KAAK,CAAC;IAC/BT,IAAI,CAACW,KAAA,CAAAE,YAAY,EAAEJ,KAAK,CAAC;EAC7B,CAAG;EACD,MAAMK,eAAe,GAAIC,IAAI,IAAK;IAChC,IAAIhB,KAAK,CAACW,SAAS,EAAE;MACnBH,cAAc,CAAC,CAACN,WAAW,CAACQ,KAAK,CAAC,CAAC,CAAC,KAAKM,IAAI,GAAG,EAAE,GAAGA,IAAI,CAAC,CAAC;IACjE,CAAK,MAAM;MACL,MAAMP,YAAY,GAAG,CAAC,GAAGP,WAAW,CAACQ,KAAK,CAAC;MAC3C,MAAMO,KAAK,GAAGR,YAAY,CAACS,OAAO,CAACF,IAAI,CAAC;MACxC,IAAIC,KAAK,GAAG,CAAC,CAAC,EAAE;QACdR,YAAY,CAACU,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;MACrC,CAAO,MAAM;QACLR,YAAY,CAACW,IAAI,CAACJ,IAAI,CAAC;MAC/B;MACMR,cAAc,CAACC,YAAY,CAAC;IAClC;EACA,CAAG;EACDN,GAAA,CAAAkB,KAAK,CAAC,MAAMrB,KAAK,CAACO,UAAU,EAAE,MAAML,WAAW,CAACQ,KAAK,GAAGL,aAAA,CAAAC,SAAW,CAACN,KAAK,CAACO,UAAU,CAAC,EAAE;IAAEe,IAAI,EAAE;EAAI,CAAE,CAAC;EACtGnB,GAAA,CAAAoB,OAAO,CAACC,SAAA,CAAAC,kBAAkB,EAAE;IAC1BvB,WAAW;IACXa;EACJ,CAAG,CAAC;EACF,OAAO;IACLb,WAAW;IACXM;EACJ,CAAG;AACH;AACY,MAACkB,cAAc,GAAGA,CAAA,KAAM;EAClC,MAAMC,EAAE,GAAGV,KAAA,CAAAW,YAAY,CAAC,UAAU,CAAC;EACnC,MAAMC,OAAO,GAAG1B,GAAA,CAAA2B,QAAQ,CAAC,MAAMH,EAAE,CAACI,CAAC,EAAE,CAAC;EACtC,OAAO;IACLF;EACJ,CAAG;AACH"},"metadata":{},"sourceType":"script","externalDependencies":[]}