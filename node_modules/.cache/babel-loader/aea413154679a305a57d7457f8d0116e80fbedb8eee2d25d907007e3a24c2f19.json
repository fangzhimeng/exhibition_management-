{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar index = require('../../tooltip/index.js');\nrequire('../../../utils/index.js');\nrequire('../../../hooks/index.js');\nvar useMenu = require('./use-menu.js');\nvar menuItem = require('./menu-item.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index$1 = require('../../../hooks/use-namespace/index.js');\nvar error = require('../../../utils/error.js');\nconst COMPONENT_NAME = \"ElMenuItem\";\nconst _sfc_main = vue.defineComponent({\n  name: COMPONENT_NAME,\n  components: {\n    ElTooltip: index.ElTooltip\n  },\n  props: menuItem.menuItemProps,\n  emits: menuItem.menuItemEmits,\n  setup(props, {\n    emit\n  }) {\n    const instance = vue.getCurrentInstance();\n    const rootMenu = vue.inject(\"rootMenu\");\n    const nsMenu = index$1.useNamespace(\"menu\");\n    const nsMenuItem = index$1.useNamespace(\"menu-item\");\n    if (!rootMenu) error.throwError(COMPONENT_NAME, \"can not inject root menu\");\n    const {\n      parentMenu,\n      indexPath\n    } = useMenu[\"default\"](instance, vue.toRef(props, \"index\"));\n    const subMenu = vue.inject(`subMenu:${parentMenu.value.uid}`);\n    if (!subMenu) error.throwError(COMPONENT_NAME, \"can not inject sub menu\");\n    const active = vue.computed(() => props.index === rootMenu.activeIndex);\n    const item = vue.reactive({\n      index: props.index,\n      indexPath,\n      active\n    });\n    const handleClick = () => {\n      if (!props.disabled) {\n        rootMenu.handleMenuItemClick({\n          index: props.index,\n          indexPath: indexPath.value,\n          route: props.route\n        });\n        emit(\"click\", item);\n      }\n    };\n    vue.onMounted(() => {\n      subMenu.addSubMenu(item);\n      rootMenu.addMenuItem(item);\n    });\n    vue.onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item);\n      rootMenu.removeMenuItem(item);\n    });\n    return {\n      parentMenu,\n      rootMenu,\n      active,\n      nsMenu,\n      nsMenuItem,\n      handleClick\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_tooltip = vue.resolveComponent(\"el-tooltip\");\n  return vue.openBlock(), vue.createElementBlock(\"li\", {\n    class: vue.normalizeClass([_ctx.nsMenuItem.b(), _ctx.nsMenuItem.is(\"active\", _ctx.active), _ctx.nsMenuItem.is(\"disabled\", _ctx.disabled)]),\n    role: \"menuitem\",\n    tabindex: \"-1\",\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClick && _ctx.handleClick(...args))\n  }, [_ctx.parentMenu.type.name === \"ElMenu\" && _ctx.rootMenu.props.collapse && _ctx.$slots.title ? (vue.openBlock(), vue.createBlock(_component_el_tooltip, {\n    key: 0,\n    effect: _ctx.rootMenu.props.popperEffect,\n    placement: \"right\",\n    \"fallback-placements\": [\"left\"],\n    persistent: \"\"\n  }, {\n    content: vue.withCtx(() => [vue.renderSlot(_ctx.$slots, \"title\")]),\n    default: vue.withCtx(() => [vue.createElementVNode(\"div\", {\n      class: vue.normalizeClass(_ctx.nsMenu.be(\"tooltip\", \"trigger\"))\n    }, [vue.renderSlot(_ctx.$slots, \"default\")], 2)]),\n    _: 3\n  }, 8, [\"effect\"])) : (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n    key: 1\n  }, [vue.renderSlot(_ctx.$slots, \"default\"), vue.renderSlot(_ctx.$slots, \"title\")], 64))], 2);\n}\nvar MenuItem = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue\"]]);\nexports[\"default\"] = MenuItem;","map":{"version":3,"names":["COMPONENT_NAME","_sfc_main","vue","defineComponent","name","components","ElTooltip","index","props","menuItem","menuItemProps","emits","menuItemEmits","setup","emit","instance","getCurrentInstance","rootMenu","inject","nsMenu","index$1","useNamespace","nsMenuItem","error","throwError","parentMenu","indexPath","useMenu","toRef","subMenu","value","uid","active","computed","activeIndex","item","reactive","handleClick","disabled","handleMenuItemClick","route","onMounted","addSubMenu","addMenuItem","onBeforeUnmount","removeSubMenu","removeMenuItem","createElementBlock","class","normalizeClass","_ctx","b","is","role","tabindex","onClick","_cache","args","type","collapse","$slots","title","openBlock","createBlock","_component_el_tooltip","key","effect","popperEffect","placement","persistent","content","withCtx","renderSlot","createElementVNode","be","Fragment"],"sources":["../../../../../../packages/components/menu/src/menu-item.vue"],"sourcesContent":["<template>\n  <li\n    :class=\"[\n      nsMenuItem.b(),\n      nsMenuItem.is('active', active),\n      nsMenuItem.is('disabled', disabled),\n    ]\"\n    role=\"menuitem\"\n    tabindex=\"-1\"\n    @click=\"handleClick\"\n  >\n    <el-tooltip\n      v-if=\"\n        parentMenu.type.name === 'ElMenu' &&\n        rootMenu.props.collapse &&\n        $slots.title\n      \"\n      :effect=\"rootMenu.props.popperEffect\"\n      placement=\"right\"\n      :fallback-placements=\"['left']\"\n      persistent\n    >\n      <template #content>\n        <slot name=\"title\" />\n      </template>\n      <div :class=\"nsMenu.be('tooltip', 'trigger')\">\n        <slot />\n      </div>\n    </el-tooltip>\n    <template v-else>\n      <slot />\n      <slot name=\"title\" />\n    </template>\n  </li>\n</template>\n\n<script lang=\"ts\">\n// @ts-nocheck\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  toRef,\n} from 'vue'\nimport ElTooltip from '@element-plus/components/tooltip'\nimport { throwError } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport useMenu from './use-menu'\nimport { menuItemEmits, menuItemProps } from './menu-item'\n\nimport type { MenuItemRegistered, MenuProvider, SubMenuProvider } from './types'\n\nconst COMPONENT_NAME = 'ElMenuItem'\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  components: {\n    ElTooltip,\n  },\n\n  props: menuItemProps,\n  emits: menuItemEmits,\n\n  setup(props, { emit }) {\n    const instance = getCurrentInstance()!\n    const rootMenu = inject<MenuProvider>('rootMenu')\n    const nsMenu = useNamespace('menu')\n    const nsMenuItem = useNamespace('menu-item')\n    if (!rootMenu) throwError(COMPONENT_NAME, 'can not inject root menu')\n\n    const { parentMenu, indexPath } = useMenu(instance, toRef(props, 'index'))\n\n    const subMenu = inject<SubMenuProvider>(`subMenu:${parentMenu.value.uid}`)\n    if (!subMenu) throwError(COMPONENT_NAME, 'can not inject sub menu')\n\n    const active = computed(() => props.index === rootMenu.activeIndex)\n    const item: MenuItemRegistered = reactive({\n      index: props.index,\n      indexPath,\n      active,\n    })\n\n    const handleClick = () => {\n      if (!props.disabled) {\n        rootMenu.handleMenuItemClick({\n          index: props.index,\n          indexPath: indexPath.value,\n          route: props.route,\n        })\n        emit('click', item)\n      }\n    }\n\n    onMounted(() => {\n      subMenu.addSubMenu(item)\n      rootMenu.addMenuItem(item)\n    })\n\n    onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item)\n      rootMenu.removeMenuItem(item)\n    })\n\n    return {\n      parentMenu,\n      rootMenu,\n      active,\n      nsMenu,\n      nsMenuItem,\n      handleClick,\n    }\n  },\n})\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}